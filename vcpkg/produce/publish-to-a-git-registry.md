---
title: "Tutorial: Publish packages to a private vcpkg registry using Git"
description: In this tutorial we show you how to create a private Git-based registry and how to publish packages in said registry.
author: vicroms
ms.author: viromer
ms.date: 01/10/2024
ms.topic: tutorial
# CustomerIntent: As an advanced vcpkg user I want to create a private Git registry so that I can publish private packages.
---
# Tutorial: Publish packages to a private vcpkg registry using Git

You can create your own private registry of packages to consume via vcpkg using Git. Private
registries are ideal if you want to use private libraries or want to make non-public modifications
to existing packages. You have full control over your packages' versions and contents, so there's
really no limit on what you can put in a private registry.

In this tutorial we show how to:

> [!div class="checklist"]
> * [Create a vcpkg registry using Git](#1---create-a-vcpkg-registry-using-git)
> * [Create the registry layout](#2---create-the-registry-layout)
> * [Add ports to the registry](#3---add-ports-to-the-registry)
> * [Update the versions database](#4---update-the-versions-database)

## Prerequisites:

* vcpkg
* Git
* A terminal

## 1 - Create a vcpkg registry using Git

vcpkg's Git-based registries are Git repositories with a specific layout that vcpkg understands.

Initialize a Git registry:

```Console
mkdir vcpkg-registry
cd vcpkg-registry
git init
```

## 2 - Create the registry layout

A vcpkg Git-based registry requires the following:

* a folder named `ports` to contain the registry's ports,
* a folder named `versions` to contain the versions database,
* a file named `baseline.json`  in the `versions` folder.

Your repository can contain any other files you want, for example: scripts, a LICENSE file, a `README.md`
file, documentation, etc.

1 - Create the `ports` and `versions` folders:

```Console
mkdir ports
mkdir versions
```

2 - Create a file named `baseline.json` in the `versions` folder with the following contents:

```json
{
  "default": {}
}
```

The minimal valid `baseline.json` file should include the above contents. Read the [versioning
documentation](../users/versioning.md) to learn more about the `baseline.json` file and the versions
database.

3 - Commit your changes to the repository

```Console
git add versions/baseline.json
git commit -m "Initial commit"
```

Optionally, if you have a remote Git repository set up, this is a good point to push your changes.

```Console
git remote add origin https://example.com/vcpkg-registry.git
git push --set-upstream origin HEAD
```

## 3 - Add ports to the registry

Copy all your package ports in the `ports` folder in the registry. Each port must have its own
directory containing at least a `vcpkg.json` file and a `portfile.cmake` file. Learn more about
creating ports in the tutorial on [packaging GitHub
repositories](../examples/packaging-github-repos.md).

```Console
git add ports/.
git commit -m "Add registry ports"
```

## 4 - Update the versions database

Each port in the registry must have a corresponding version file. Version files are generated by
the `vcpkg x-add-version` command. This command also updates the baseline entry for each port in
`version/baseline.json`.

To update the versions database for all your ports at once, run:

```Console
vcpkg --x-builtin-ports-root=./ports --x-builtin-registry-versions-dir=./versions x-add-version --all --verbose
```

The `--x-builtin-ports-root` and `--x-builtin-registry-versions-dir` are redirection options.
Normally, the `x-add-version` command operates on vcpkg's built-in registry; but by using the
redirection options, it is possible to use the command on local Git registries.

The `--all` option makes vcpkg scan the `ports` directory for all available ports and updates them
all at once. Lastly, the `--verbose` option makes the command print each operation it executes to
standard output, you can suppress the output by removing this option.

When all the output looks correct, run:

```Console
git add .
git commit -m "Update versions database"
```

If you have a remote Git repository, don't forget to push your changes:

```Console
git push
```

## Next Steps

And that's it! You have set up your own private Git-based registry to use with vcpkg.

Here are some additional tasks to try next:

* [Install dependencies from a private registry](../consume/git-registries.md)
* [Authenticate to registries using private Git repositories](../users/authentication.md)
<!--[Set up package validation in your private registry]-->
